<!DOCTYPE html>
<!-- TODO:
[] Re-order structure of page for easy display toggling
-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=.5, maximum-scale=12.0, minimum-scale=.25, user-scalable=yes"/>
        <link rel="stylesheet" type="text/css" href="css/map_style.css">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body>
        <div id="left_column">
            <section class="title">
                <h1>COVID-19 Interactive Map</h1>
                </section>
            <form id="choiceform">
                <small>Authors: Mark Swan and Calum McKeekin</small>
                <h2> How to use CovidMap</h2>
                <h3> CLICK, ZOOM & EXPLORE THE MAP </h3> <p>
                  Begin by clicking the map on the right. Selecting a particular region will generate a data report with graphs for that given area. Scroll down to see the data report at the bottom of the page.
                </p>
                <h3> SELECTING DATA </h3> <p>
                  The Scottish Government tracks data at two different region scales. The first is local authority district, this roughly is the same area as a consituency in a local political election. The second is regional health board. There are many local authorities in one health board region, representing the multiple hospitals that reside under a given region.
                </p>
                <h4> Local Authority vs Health Board</h4>
                <p> See the table below explaining the different local authorities and health boards </p>

                <p>
                    <br>&ensp;&ensp;&ensp;Please select a map region:&ensp;
                    <select name="resolution" id="resolution">
                        <option value="lad">Local Authority Districts</option>
                        <option value="hbo">Health Boards</option>
                    </select> <br>
                </p>
                <br>
            </form>
            <div id="criteriaBox">
            <h4> Selecting a Data Metric </h4> <p> Select a Covid-19 metric below and watch the map change color. The more red the local area, the worse the situation is for that certain area given the particular metric.
            <p>
                <br> Please select a data metric:&ensp;
                <select name="criteria" id="criteria">
                    <option value="ratio_total_death_covid">Ratio of COVID Deaths</option>
                    <!-- NOT YET ADDED
                    <option value="tst">Tests</option>
                    -->
                    <option value="ratio_carehome_death_covid">COVID Care Home Deaths</option>
                    <option value="ratio_hospital_death_covid">Ratio of Hospital COVID Deaths</option>
                </select>
                <table style="border:none;margin-left:30%;margin-right:70%;width:100px">
                    <tr><td><div id = "grad"></div></td></tr>
                    <tr><td>Worst&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Best</td></tr>
                </table>
            </p>
            </div>
            <div id="HBOKey">
                <table style="border:none;font-size:12px;margin-left:10%">
                    <tr><td><div class="keyBoxHBO" style="background-color:#5a6c71"></div></td><td>NHS Ayrshire and Arran</td>
                        <td><div class="keyBoxHBO" style="background-color:#868d86"></div></td><td>NHS Borders</td></tr>
                    <tr><td><div class="keyBoxHBO" style="background-color:#f1b4b2"></div></td><td>NHS Dumfries and Galloway</td>
                        <td><div class="keyBoxHBO" style="background-color:#808000"></div></td><td>NHS Western Isles</td></tr>
                    <tr><td><div class="keyBoxHBO" style="background-color:#daeabf"></div></td><td>NHS Fife</td>
                        <td><div class="keyBoxHBO" style="background-color:#98FB98"></div></td><td>NHS Forth Valleys</td></tr>
                    <tr><td><div class="keyBoxHBO" style="background-color:#f67c74"></div></td><td>NHS Grampian</td>
                        <td><div class="keyBoxHBO" style="background-color:#c27e9e"></div></td><td>NHS Greater Glasgow and Clyde</td></tr>
                    <tr><td><div class="keyBoxHBO" style="background-color:#f6d186"></div></td><td>NHS Highland</td>
                        <td><div class="keyBoxHBO" style="background-color:#ECF210"></div></td><td>NHS Lanarkshire</td></tr>
                    <tr><td><div class="keyBoxHBO" style="background-color:#EFCC44"></div></td><td>NHS Lothian</td>
                        <td><div class="keyBoxHBO" style="background-color:#F05E23"></div></td><td>NHS Orkney</td></tr>
                    <tr><td><div class="keyBoxHBO" style="background-color:#9DC183"></div></td><td>NHS Shetland</td>
                        <td><div class="keyBoxHBO" style="background-color:#875F9A"></div></td><td>NHS Tayside</td></tr>
                </table>
            </div>
              <div id="ladDoc" class = "doc">
                <br><br>
                <h2 id="reportTitleLAD">Data Report - <strong id="graphTitleLAD" class = "graphTitle"></strong></h2>
                <h3>Introduction to Data</h3>
                <p> All information is automatically updated from the Scottish Government websites.</p>

                <br>
                <h3>Total Number of COVID-19 Deaths per Day </h3>
                <p> Graph of the total number of deaths each day in the selected area region.<br> Source: (Scottish Government) </p>
                <section id="covidDTGraph"></section>

                <br>
                <h3>Total Number of COVID-19 Deaths by Location</h3>
                <p> Graph of the total number deaths where coronavirus is recorded as the underlying cause by location, either care home, non-institution or hospital. A downward trend implies that the number of deaths is decreasing per day in a given region. If there is no data showing, then the number of deaths in each location is too low to be represented on a graph. <br> Source: (Scottish Government) </p>

                <section id="barGraph"></section>
                <h3>How Is The Community Moving?</h3>
                <p> This graph uses anonymised insights from Google Maps to give an indication of movement trends over time across different categories of places such as retail and recreation, groceries and pharmacies, parks, transit stations, workplaces, and residential areas. Each data point is compared against the UK average. <br> Source: (Google Mobility Report) </p> <br>
                <select id="selectButton" style="margin-left:3%">
                </select>
                <section id="graphGMS"></section>

                <h3></h3>
                <section id="graph3"></section>

                <br>
                <h3>All Statistics Table</h3>
                <section id="data_table" style="margin-left:10%"></section>
            </div>
            <div id="hboDoc" class = "doc">
                <h2 id="reportTitleHBO">Data Report - <strong id="graphTitleHBO" class = "graphTitle"></strong></h2>
                <h3>Total Hospital Patients</h3>
                <section id="hospital_allGraph"></section>
                <h3>ICU Patients</h3>
                <section id="icuGraph"></section>
                <h3>Total Hospital COVID-19 patients</h3>
                <section id="hospital_covidGraph"></section>
                <h3>Total Cumulative COVID-19 Patients</h3>
                <section id="casesGraph"></section>
            </div>
        </div>
        <div id="right_column">
            <div class="overlay">
                <div id="hoverText" class='hoverText'>
                </div>
                <section id="map" class="mapBorder">
                </section>
            </div>
        </div>


        <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.1.0/topojson.min.js"></script>
        <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>

        <script src="js/map.js"></script>
        <script src="js/lads.js"></script>
        <script src="js/form.js"></script>
        <script src="js/graph.js"></script>

        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

        <script type="text/javascript">
          var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
          document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
          try {
            var pageTracker = _gat._getTracker("UA-54344943-1");
            pageTracker._trackPageview();
          } catch(err) {}
        </script>
    </body>
</html>
